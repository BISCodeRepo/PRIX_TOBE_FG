<!DOCTYPE html>
<html lang="en">
<head th:replace="~{partials/fragment :: head}">
</head>

<body th:onload="${process.finished or process.failed} ? '' : 'initTimer();'">
<table width="100%" height="119" border="0" cellpadding="0" cellspacing="0" style="margin-bottom:10px">
  <tr>
    <td height="88" background="/images/menu_bg.gif">
      <table width="990" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td width="203"><img src="/images/ci.gif" width="196" height="88" alt="CI"></td>
          <td>
            <table width="100%" height="88" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td align="right" valign="top" style="padding-top:3px">
                  <table border="0" cellspacing="0" cellpadding="0">
                    <tr>
                      <td width="62" height="14" background="/images/top_dot_01.gif" style="background-repeat:no-repeat ">&nbsp;</td>
                      <td width="45" height="14" background="/images/top_dot_01.gif" style="background-repeat:no-repeat ">&nbsp;</td>
                      <td width="68" height="14" background="/images/top_dot_01.gif" style="background-repeat:no-repeat ">&nbsp;</td>
                      <td width="50" height="14" background="/images/top_dot_01.gif" style="background-repeat:no-repeat ">&nbsp;</td>
                      <td width="60" height="14" background="/images/top_dot_01.gif" style="background-repeat:no-repeat ">&nbsp;</td>
                    </tr>
                    <tr>
                      <td><img src="/images/top_icon_01.gif" width="2" height="9" alt="Icon">&nbsp;
                        <a th:href="@{/login}" class="top_menu" th:text="${process.id == 4 ? 'LOG IN' : 'LOGOUT'}"></a>
                      </td>
                      <td><img src="/images/top_icon_01.gif" width="2" height="9" alt="Icon">&nbsp;&nbsp;<a th:href="@{/help}" class="top_menu">HELP</a></td>
                      <td><img src="/images/top_icon_01.gif" width="2" height="9" alt="Icon">&nbsp;&nbsp;<a th:href="@{/contact}" class="top_menu">CONTACT</a></td>
                      <td><img src="/images/top_icon_01.gif" width="2" height="9" alt="Icon">&nbsp;&nbsp;<a th:href="@{/admin}" class="top_menu">ADMIN</a></td>
                      <td>&nbsp;</td>
                    </tr>
                  </table>
                </td>
              </tr>

              <tr>
                <td valign="bottom">
                  <table border="0" cellspacing="0" cellpadding="0">
                    <tr>
                      <td><a th:href="@{/}"><img src="/images/menu02_01.gif" width="142" height="29" alt="Menu"></a></td>
                      <td><a th:href="@{/livesearch}"><img src="/images/menu02_02.gif" width="135" height="29" alt="Live Search"></a></td>
                      <td><a th:href="@{/download}"><img src="/images/menu02_03.gif" width="133" height="29" alt="Download"></a></td>
                      <td><a th:href="@{/publications}"><img src="/images/menu02_04.gif" width="157" height="29" alt="Publications"></a></td>
                    </tr>
                  </table>
                </td>
              </tr>

            </table>
          </td>
        </tr>
      </table>
    </td>
  </tr>

  <tr>
    <td height="25" align="right" background="/images/menu_bg2.gif"><img src="/images/menu_bg3.gif" width="276" height="25" alt="Menu Background"></td>
  </tr>

  <tr>
    <td height="6" background="/images/menu_bg4.gif"></td>
  </tr>

</table>

<table width="95%" border="0" align="center" cellpadding="1">
  <tr>
    <td><font size="3">Processing... <font class="blue"><em th:text="${process.rate + '%'}"></em></font></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>to stop, click <a th:href="${process.engine == 'dbond' ? '/dbond/dbond_search' : '/search'}">here</a></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><font class="dark"><pre th:utext="${process.output}"></pre></font></td>
  </tr>
</table>

<script th:inline="javascript">
  let timerID = null;

  function initTimer() {
    console.log("타이머 시작");
    timerID = setTimeout(() => timeOut(), 3000);
  }

  function timeOut() {
    clearTimeout(timerID);
    console.log("이동전");
    window.location = /*[[@{/dbond/process(execute='no', log=${process.logPath}, xml=${process.xmlPath}, ms=${process.msPath}, db=${process.dbPath}, dec=${process.decoyPath}, title=${process.title}, mi=${process.msIndex}, di=${process.dbIndex}, mul=${process.multiPath}, engine=${process.engine})}]]*/;
    console.log("이동후");
  }
</script>

</body>
<footer th:replace="~{partials/fragment :: footer}"></footer>
</body>
</html>
